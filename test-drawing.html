<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>æç”»æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ</title>
    <style>
        .container { max-width: 800px; margin: 0 auto; padding: 20px; }
        .test-section { margin: 20px 0; padding: 20px; border: 2px solid #667eea; border-radius: 8px; }
        .btn { padding: 10px 20px; margin: 5px; cursor: pointer; background: #667eea; color: white; border: none; border-radius: 5px; }
        .btn:hover { background: #5a67d8; }
        .hidden { display: none !important; }
        .image-preview { margin-top: 20px; }
        .image-controls { margin-top: 10px; }
        #test-result { margin-top: 20px; padding: 20px; background: #f0f0f0; border-radius: 5px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>æç”»æ©Ÿèƒ½ãƒ‡ãƒãƒƒã‚°ãƒ†ã‚¹ãƒˆ</h1>

        <div class="test-section">
            <h2>1. HTMLãŒæ­£ã—ãé…ç½®ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª</h2>
            <div id="image-preview-1" class="image-preview">
                <div class="image-canvas-container">
                    <img id="preview-img-1" alt="ãƒ†ã‚¹ãƒˆç”»åƒ" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChwGA60e6kgAAAABJRU5ErkJggg==">
                    <canvas id="drawing-canvas-1" class="drawing-canvas hidden"></canvas>
                </div>
                <div class="image-controls">
                    <button id="toggle-drawing-1" class="btn btn-secondary">ğŸ¨ æç”»ãƒ¢ãƒ¼ãƒ‰</button>
                    <button id="remove-image-1" class="btn btn-secondary">ç”»åƒ1ã‚’å‰Šé™¤</button>
                </div>
            </div>
            <p>â†‘ ãƒœã‚¿ãƒ³ãŒè¦‹ãˆã¦ã„ã¾ã™ã‹ï¼Ÿ</p>
        </div>

        <div class="test-section">
            <h2>2. DrawingManagerã‚¯ãƒ©ã‚¹ãŒèª­ã¿è¾¼ã¾ã‚Œã¦ã„ã‚‹ã‹</h2>
            <button onclick="testDrawingManager()" class="btn">DrawingManagerãƒ†ã‚¹ãƒˆ</button>
            <div id="test-result"></div>
        </div>

        <div class="test-section">
            <h2>3. å®Ÿéš›ã®å‹•ä½œãƒ†ã‚¹ãƒˆ</h2>
            <input type="file" id="test-file" accept="image/*">
            <div id="test-preview" class="hidden">
                <img id="test-img" style="max-width: 300px;">
                <div class="image-controls">
                    <button id="test-toggle" class="btn">ğŸ¨ æç”»ãƒ¢ãƒ¼ãƒ‰</button>
                </div>
            </div>
        </div>
    </div>

    <script src="js/drawing.js"></script>
    <script>
        function testDrawingManager() {
            const result = document.getElementById('test-result');
            try {
                if (typeof DrawingManager !== 'undefined') {
                    result.innerHTML = '<span style="color: green;">âœ… DrawingManagerã‚¯ãƒ©ã‚¹ãŒå­˜åœ¨ã—ã¾ã™</span>';

                    // å®Ÿéš›ã«åˆæœŸåŒ–ã—ã¦ã¿ã‚‹
                    const manager = new DrawingManager(1);
                    result.innerHTML += '<br><span style="color: green;">âœ… DrawingManagerãŒåˆæœŸåŒ–ã§ãã¾ã—ãŸ</span>';
                } else {
                    result.innerHTML = '<span style="color: red;">âŒ DrawingManagerã‚¯ãƒ©ã‚¹ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“</span>';
                }
            } catch (error) {
                result.innerHTML = '<span style="color: red;">âŒ ã‚¨ãƒ©ãƒ¼: ' + error.message + '</span>';
            }
        }

        // ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãƒ†ã‚¹ãƒˆ
        document.getElementById('test-file').addEventListener('change', (e) => {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = (e) => {
                    document.getElementById('test-img').src = e.target.result;
                    document.getElementById('test-preview').classList.remove('hidden');
                };
                reader.readAsDataURL(file);
            }
        });

        // æç”»ãƒ¢ãƒ¼ãƒ‰ãƒœã‚¿ãƒ³ãƒ†ã‚¹ãƒˆ
        document.getElementById('test-toggle').addEventListener('click', () => {
            alert('æç”»ãƒ¢ãƒ¼ãƒ‰ãƒœã‚¿ãƒ³ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚Œã¾ã—ãŸï¼');
        });

        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã®è‡ªå‹•ãƒã‚§ãƒƒã‚¯
        window.addEventListener('load', () => {
            console.log('DrawingManagerå­˜åœ¨ãƒã‚§ãƒƒã‚¯:', typeof DrawingManager !== 'undefined');
            console.log('æç”»ãƒ¢ãƒ¼ãƒ‰ãƒœã‚¿ãƒ³è¦ç´ :', document.getElementById('toggle-drawing-1'));
        });
    </script>
</body>
</html>